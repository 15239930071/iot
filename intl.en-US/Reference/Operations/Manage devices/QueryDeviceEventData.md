# QueryDeviceEventData {#reference_tq4_jrz_wdb .reference}

Use this operation to query the event records of a specified device.

## Request parameters {#section_srt_qqr_xdb .section}

|Name|Type|Required|Description|
|:---|:---|:-------|:----------|
|Action|String|Yes|The operation that you want to perform. Set the value to QueryDeviceEventData.|
|IotId|String|No| Device ID.

 **Note:** If you specify this parameter, then you do not need to specify ProductKey or DeviceName. As the unique identifier of the device, IotId corresponds to the combination of ProductKey and DeviceName. If you specify both IotId and the combination of ProductKey and DeviceName, then IotId is used.

 |
|ProductKey|String|No| Specifies the product key of the device.

 **Note:** If you specify this parameter, then you must also specify DeviceName.

 |
|DeviceName|String|No| The name of the device.

 **Note:** If you specify this parameter, you must also specify ProductKey.

 |
|EventType|String|No| Event type. Value:

 info: Information.

 alert: Alert.

 error: Error.

 |
|Identifier|String|No|The identifier of the event. To view the event identifier of the Pro Edition device, go to the Feature Definitions page of the Pro Edition product that the device belongs to in the console.|
|StartTime|Long|Yes|The start time of the event record.|
|EndTime|Long|Yes|The end time of the event record.|
|PageSize|Integer|No|The number of records per page in the result.|
|Asc|Integer|No| The sorting order of the event records in returned results. Values:

 0: Descending.

 1: Ascending.

 |

## Response parameters {#section_qds_dyr_xdb .section}

|Name|Type|Description|
|:---|:---|:----------|
|RequestId|String|The GUID generated by Alibaba Cloud for the request.|
|Success|Boolean|Indicates whether the call succeeded. A value of true indicates that the call is successful. A value of false indicates that the call has failed.|
|ErrorMessage|String|The error message returned when a call fails.|
|Data|EventDataInfo|The device event record returned when the call is successful. For more information, see [EventDataInfo](#table_sdc_kyr_xdb).|

|Name|Type|Description|
|:---|:---|:----------|
|List|List|Event collection. Each element represents an event. See [EventInfo](#table_hxp_kzr_xdb) for element structure.|
|NextValid|Boolean|Indicates whether the next page is available. A value of true indicates available, and a value of false indicates unavailable.|
|NextTime|Long|The start time of event record on the next page.|

|Name|Type|Description|
|:---|:---|:----------|
|Name|String|Event name.|
|Time|Long|The time the event occurred.|
|OutputData|String|The output parameter of the event, which is a string in MAP format. For more information about the data structure, see [OutputData](#table_z2b_tzr_xdb).|
|EventType|String|Event type.|
|Identifier|String|Event identifier.|

|Name|Type|Description|
|:---|:---|:----------|
|Key|String|Parameter identifier.|
|Value|Long |Value of parameter.|

## Examples {#section_c5y_b1s_xdb .section}

**Request example**

```
https://iot.cn-shanghai.aliyuncs.com/?Action=QueryDeviceEventData
&IotId=abcdef1234567************
&ProductKey=AL**********
&DeviceName=device1
&EventType=info
&Identifier=lightLevel
&StartTime=1516538300303L
&EndTime=1516541900303L
&PageSize=10
&Asc=1
&<common request parameters>
```

**Response example**

-   JSON format

    ```
    {
      "RequestId":"57b144cf-09fc-4916-a272-a62902d5b207",
      "Success": true，
      "Data": {
        "NextValid": false,
        "NextTime": 1516449221253,
        "List": {
          "EventInfo": [
            {
              "Name": "testEventInfoName",
              "Time": "1516517974638",
              "OutputData": "{\"structArgs\":{\"structchildFLOATf71c20e\":1.23,\"structchildINT6b6b626\":3,\"structchildDATE663436a\":\"1516517966152\",\"structchildDOUBLE08d0f74\":1.23,\"structchildTEXTdc764f9\":\"07b68264b0ba42c18e5f\",\"structchildBOOLd260729\":0,\"structchildENUMbe62590\":1},\"enumArgs\":0,\"boolArgs\":0,\"floatArgs\":2.3,\"dateArgs\":\"1516517966152\",\"intArgs\":1,\"doubleArgs\":2.3,\"textArgs\":\"dV56zbkzjBjw1Ti1dA52\"}",
              "EventType": "info",
              "Identifier": "testEventInfo"
            },
            {
              "Name": "testEventInfoName",
              "Time": "1516449221254",
              "OutputData": "{\"structArgs\":{\"structchildFLOATf71c20e\":1.23,\"structchildINT6b6b626\":3,\"structchildDATE663436a\":\"1516449212507\",\"structchildDOUBLE08d0f74\":1.23,\"structchildTEXTdc764f9\":\"a1f3583dde3944289639\",\"structchildBOOLd260729\":0,\"structchildENUMbe62590\":1},\"enumArgs\":0,\"boolArgs\":0,\"floatArgs\":2.3,\"dateArgs\":\"1516449212507\",\"intArgs\":1,\"doubleArgs\":2.3,\"textArgs\":\"1z4XNBvvA7eZw8XViaJp\"}",
              "EventType": "info",
              "Identifier": "testEventInfo"
            }
          ]
        }
      }
    }
    ```

-   XML format

    ```
    <? xml version='1.0' encoding='utf-8'? >
    <QueryDeviceEventDataResponse>
        <RequestId>57b144cf-09fc-4916-a272-a62902d5b207</RequestId>
        <Success>true</Success>
        <Data>
            <NextValid>false</NextValid>
            <NextTime>1516449221253</NextTime>
            <List>
                <EventInfo>
                    <Name>testEventInfoName</Name>
                    <Time>1516517974638</Time>
                    <OutputData>{"structArgs":{"structchildFLOATf71c20e":1.23,"structchildINT6b6b626":3,"structchildDATE663436a":"1516517966152","structchildDOUBLE08d0f74":1.23,"structchildTEXTdc764f9":"07b68264b0ba42c18e5f","structchildBOOLd260729":0,"structchildENUMbe62590":1},"enumArgs":0,"boolArgs":0,"floatArgs":2.3,"dateArgs":"1516517966152","intArgs":1,"doubleArgs":2.3,"textArgs":"dV56zbkzjBjw1Ti1dA52"}</OutputData>
                    <EventType>info</EventType>
                    <Identifier>testEventInfo</Identifier>
                </EventInfo>
                <EventInfo>
                    <Name>testEventInfoName</Name>
                    <Time>1516449221254</Time>
                    <OutputData>{"structArgs":{"structchildFLOATf71c20e":1.23,"structchildINT6b6b626":3,"structchildDATE663436a":"1516449212507","structchildDOUBLE08d0f74":1.23,"structchildTEXTdc764f9":"a1f3583dde3944289639","structchildBOOLd260729":0,"structchildENUMbe62590":1},"enumArgs":0,"boolArgs":0,"floatArgs":2.3,"dateArgs":"1516449212507","intArgs":1,"doubleArgs":2.3,"textArgs":"1z4XNBvvA7eZw8XViaJp"}</OutputData>
                    <EventType>info</EventType>
                    <Identifier>testEventInfo</Identifier>
                </EventInfo>
            </List>
        </Data>
    </QueryDeviceEventDataResponse>
    ```


