# QueryDeviceServiceData {#reference_j2n_lrz_wdb .reference}

Use this operation to query the service records of a specified device.

## Request parameters {#section_i1h_sws_xdb .section}

|Name|Type|Required|Description|
|:---|:---|:-------|:----------|
|Action|String|Yes|The operation that you want to run. Set the value to QueryDeviceServiceData.|
|IotId|String|No| Device ID.

 **Note:** If you specify this parameter, then you do not need to specify ProductKey or DeviceName. As the GUID of the device, IotId corresponds to the combination of ProductKey and DeviceName. If you specify both IotId and the combination of ProductKey and DeviceName, then IotId is used.

 |
|ProductKey|String|No| Specifies the product key of the device.

 **Note:** If you specify this parameter, then you must also specify DeviceName.

 |
|DeviceName|String|No| The device name.

 **Note:** If you specify this parameter, then you must also specify ProductKey.

 |
|Identifier|String|Yes|The identifier of the service. To view the service identifier of the Pro Edition device, go to the Feature Definitions page of the Pro Edition product that the device belongs to in the console.|
|StartTime|Long|Yes|The start time of the service record.|
|EndTime|Long |Yes|The end time of the service record.|
|PageSize|Integer|No|The number of records per page in the result.|
|Asc|Integer|No| The sorting order of the service records in returned results. Values: 

 0: Descending.

 1: Ascending.

 |

## Response parameters {#section_uy3_hxs_xdb .section}

|Name|Type|Description|
|:---|:---|:----------|
|RequestId|String|The GUID generated by Alibaba Cloud for the request.|
|Success|Boolean|Indicates whether the call is successful. A value of true indicates that the call is successful. A value of false indicates that the call has failed.|
|ErrorMessage|String|The error message returned when the call fails.|
|Data|Data|The device service record returned when the call is successful. For more information, see [Data](#table_sdc_597r_xdb).|

|Name|Type|Description|
|:---|:---|:----------|
|List|List<ServiceInfo\>|Event collection. Each element represents a service. See [ServiceInfo](#table_o4z_bys_xdb) for element structure.|
|NextValid|Boolean |Indicates whether the next page is available.  true indicates available, and false indicates unavailable.|
|NextTime|Long |The start time of service record on the next page.|

|Name|Type|Description|
|:---|:---|:----------|
|Name|String|Service name.|
|Time|Long |The time when the service was executed.|
|OutputData|String|The output parameter of the service, which is a string in MAP format, following the key:value pattern.|
|InputData|String|The input parameter of the service, which is a string in MAP format, following the key:value pattern.|
|Identifier|String|Service identifier.|

## Example {#section_hn4_3zs_xdb .section}

**Request example**

```
https://iot.cn-shanghai.aliyuncs.com/?Action=QueryDeviceServiceData
&IotId=...
&ProductKey=...
&PeviceName=...
&Identifier=set
&StartTime=1516538300303L
&EndTime=1516541900303L
&PageSize=10
&Asc=1
&<common request parameters>
```

**Response example**

-   JSON format

    ```
    {
      "RequestId":"57b144cf-09fc-4916-a272-a62902d5b207",
      "Success": true，
      "Data": {
        "NextValid": true,
        "NextTime": 1517315865197,
        "List": {
          "ServiceInfo": [
            {
              "Name": "set",
              "Time": 1517315865198,
              "OutputData": "{\"code\":200,\"data\":{},\"id\":\"100686\",\"message\":\"success\",\"version\":\"1.0\"}",
              "Inputdata": "{\" lightadjustified Level \ ": 123 }",
              "Identifier": "set"
            }
          ]
        }
      }
    }
    ```

-   XML format

    ```
    <? xml version='1.0' encoding='utf-8'? >
    <QueryDeviceServiceDataResponse>
        <RequestId>57b144cf-09fc-4916-a272-a62902d5b207</RequestId>
        <Success>true</Success>
        <Data>
            <NextValid>true</NextValid>
            <NextTime>1517315865197</NextTime>
            <List>
                <ServiceInfo>
                    <Name>set</Name>
                    <Time>1517315865198</Time>
                    <OutputData>{"code":200,"data":{},"id":"100686","message":"success","version":"1.0"}</OutputData>
                    <InputData>{"LightAdjustLevel":123}</InputData>
                    <Identifier>set</Identifier>
                </ServiceInfo>
            </List>
        </Data>
    </QueryDeviceServiceDataResponse>
    ```


