# 数据转发到RDS {#concept_lc3_5pt_tdb .concept}

您可以设置规则引擎，将处理后的数据转发到云数据库（以下简称RDS）的VPC实例中。

## 使用须知 {#section_y5v_fv3_wdb .section}

-   目前转发至RDS只发布在华东2、硅谷和新加坡三个节点。
-   只支持同region转发，不支持跨区转发。比如，华东2节点的平台数据只能转发到华东2的RDS中。
-   只支持转发到VPC实例。
-   只支持MySQL实例。
-   支持普通数据库和高权限数据库的转发。

## 准备工作 {#section_tyl_hv3_wdb .section}

在设置转发之前，您需要参考[设置规则引擎](cn.zh-CN/用户指南/规则引擎/设置规则引擎.md#)编写SQL完成对数据的处理。

## 操作步骤 {#section_ywy_3v3_wdb .section}

1.  单击**数据转发**一栏的**添加操作**，出现添加操作页面。选择**存储到云数据库\(RDS\)中**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7547/2856_zh-CN.png)

2.  按照界面提示，设置参数。
    -   选择操作：选择存储到云数据库\(RDS\)中。
    -   VPC实例、MySQL数据库：根据您的业务选择当前区域下的VPC实例和MySQL数据库。

        **说明：** 如果是高权限数据库，需要您手动输入数据库名称。

    -   账号、密码：输入数据库的账号、密码。此账号密码应具有该数据库的读写权限，否则规则引擎无法将数据写入RDS。

        **说明：** 规则引擎获得账号后，仅负责将规则匹配的数据写进数据库中，不会做其他操作。

    -   表名：输入数据库中已建立的数据表名，规则引擎将把数据写入这张表上。
    -   字段：此处输入数据表的字段，规则引擎将把处理后的数据存入该字段中。
    -   值：此处填写输入数据表字段的值。可以使用转义符`$`，格式为`${key}`，即提取Topic中key对应的Value值作为输入值。

        规则引擎的SQL为：`SELECT tem FROM mytopic`；RDS数据库有一张表，表中有`tem`字段，类型是`String`。

        控制台配置时，**字段**处填入RDS数据表的字段tem，**值**处填入规则引擎筛选出来的JSON字段$\{key\}。

        **说明：** 

        -   值处需使用`${}`，否则填入表中的将是一个常量。
        -   字段与值的数据类型需保持一致，否则无法存储成功。
3.  配置完成后，规则引擎为了连接RDS，会在RDS的白名单中添加下列IP。若这些IP未出现，请手动添加。

    -   华东2：100.104.123.0/24
    -   亚太东南1（新加坡\)：100.104.106.0/24
    -   美国西部1（硅谷）：100.104.8.0/24
    RDS控制台的白名单示例如下：

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/7547/3010_zh-CN.png)


