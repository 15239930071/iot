# 使用限制 {#concept_gyg_xrt_tdb .concept}

物联网平台设置了以下使用限制。

## 产品与设备 {#section_srj_k1v_4fb .section}

|限制|描述|限制|
|:-|:-|:-|
|标签个数|单个产品、设备、分组最多分别可以添加的标签数。|100|
|产品数量|单账号最多可以创建的产品数。|1000|
|设备数量|单产品最多可以添加的设备数。**说明：** 若该限制数量不能满足您的业务需求，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex)说明您的需求。

|500,000|
|单账号最多可以添加的设备数。**说明：** 若该限制数量不能满足您的业务需求，请[提交工单](https://selfservice.console.aliyun.com/ticket/createIndex)说明您的需求。

|10,000,000|
|网关与子设备|单个网关下最多添加的子设备数。|1,500|
|单个网关下最多添加的子设备通信通道数。|1,000|
|网关配置下发频率。|10分钟1次|
|物模型功能定义|单个产品最多可添加的功能数。|200|
|struct类的属性，最多可添加的参数个数。|10|
| 当功能的数据类型：

 -   为enum时，枚举项最多不超过25个。
-   为text时，数据长度不超过2048字节。
-   为array时，数组内的元素不超过128个

 |-|
|服务中可添加的入参和出参分别不超过20个。|20|
|事件中可添加的出参不超过20个。|20|
|设备分组|单个分组最多添加20,000个设备。|20,000|
|一个设备最多可以被添加到10个分组中。|10|
|数据解析|数据解析上传的脚本文件大小不能超过48 KB。|48 KB|
|远程配置|远程配置文件，仅支持JSON格式，大小不能超过64 KB。|64 KB|
|数据存储|产品运行时产生的属性、事件、服务数据存储时间为30天，超出30天的数据不再保存。|30天|

## 连接通信 {#section_x5w_ycv_4fb .section}

|描述|限制|
|:-|:-|
|单账号每秒最大MQTT连接请求数。|500|
|单设备每分钟最大连接次数。|5|
|单设备的最大订阅数。超过订阅数的请求将会被直接拒绝。设备端可以通过验证SUBACK消息，确认请求是否成功。|100|
|单账号每秒由设备端向物联网平台发送的请求数。|10000|
|单账号每秒由物联网平台向设备端发送的请求数。|2000|
|单账户每秒到达规则引擎数据流转的消息数量。|1000|
|单账号每秒服务器订阅最大消息数。|1000|
|单设备上报上限QoS0为30条/秒，QoS1为10条/秒。|QoS0：30条/秒QoS1：10条/秒

|
|单设备下行接收限制为50条/秒，同时受限于网络环境。如果网络tcp write buffer拥堵，将直接返回错误。比如，您通过Pub接口发指令给设备，如果设备接收不过来，将收到限流错误。**说明：** MQTT的Pub上报消息限流，协议上没有任何应答。您可以通过日志服务发现设备被限流的警告。

|50条/秒|
|单个连接每秒的吞吐量（带宽）。|1024 KB|
|物联网平台限制了单客户端的最大未确认入站发布请求数。达到此限制后，除非返回PUBACK消息，否则服务器不会再接收新的客户端发布请求。|100|
|QoS1消息的最大存储时间。如果最大时间后未从客户端接收到 PUBACK 消息，则会丢弃这些发布请求。|1周|
|MQTT单个发布消息最大长度。超过此大小的发布请求将被直接拒绝。|256 KB|
|CoAP单个发布消息最大长度。超过此大小的发布请求将被直接拒绝。|1 KB|
|MQTT连接心跳时间为30至1200秒。心跳时间不在此区间内，服务器将会拒绝连接。建议取值300秒以上。

从IoT发送CONNACK响应CONNECT消息时，开始心跳计时。收到PUBLISH、SUBSCRIBE、PING、或 PUBACK消息时，会重置计时器。超过指定1.5倍心跳时间间隔未收到这些消息时（指定心跳时间乘以1.5），将自动断开连接。

|30-1200秒|

## Topic相关 {#section_mmp_bdv_4fb .section}

|描述|限制|
|:-|:-|
|一个产品最多可以定义50个Topic类。|50|
|设备只能对自己的Topic进行消息发布与订阅。|-|
|Topic长度不能超过128字节， UTF-8 编码字符。|128字节|
|Topic中斜杠的最大数量。|7|
|每个订阅请求的最大订阅数。|8|
|订阅和取消订阅都是操作10秒后生效，一次订阅永久生效。建议您提前订阅Topic以免漏失信息。示例：设备向Topic A发送SUB请求，10秒后，订阅生效，设备开始收到实时消息，除非取消订阅，设备将一直接收Topic A的消息。

|10秒|
|广播Topic，同一个Topic最多可以被1000个设备订阅，服务端SDK每秒只可发一条广播。|1000|

## 设备影子 {#section_cnm_ddv_4fb .section}

|描述|限制|
|:-|:-|
|设备影子JSON文档的最大深度。|5|
|设备影子JSON文档的大小限制。|16 KB|
|设备影子JSON文档的属性数量限制。|128|
|每个设备每秒的请求数。|20|

## 数据流转 {#section_llt_ddv_4fb .section}

|描述|限制|
|:-|:-|
|单账号最多可以设置1000条规则。|1000|
|一条规则中转发数据的操作不能超过10个。|10|
|数据转发性能依赖所转发的云产品实例，在云产品实例性能足够的情况下，数据流转为单个阿里云账号提供1000 QPS的数据转发能力。即，子账号共享主账号配额；消息并发处理，每秒最多允许1000条消息经过数据流转流转到其他云产品。 如果请求量超出该限制或云产品写入耗时超过1s，数据转发会被限流。|1000QPS|
|数据转发依赖其他云产品，使用时需确保目标云产品实例正常。目标云产品的实例宕机、欠费、参数错误（如授权变更、值非法）、配置错误等异常状况将会导致消息流转失败。|-|
|数据流转不保证消息只到达一次，在分布式环境下，某些rebalance短暂不一致可能导致一条消息发送多次情况，应用方收到消息后需要去重。|-|

## 云端API限制 {#section_zds_vcv_4fb .section}

|API名称|单账号（QPS）|单IP（QPS）|
|:----|:-------|:-------|
|Pub|1600|100|
|RRpc|1000|100|
|PubBroadcast|1|100|
|其他接口|50|100|

-   若您调用接口收到限流报错，像[公共错误](https://error-center.alibabacloud.com/status/product/Public)中29-31类型报错，可以重新尝试调用。

**说明：** 

-   单账号QPS指单个阿里云账号每秒可调用次数，子账号共享主账号配额。
-   单IP QPS指单个IP地址（单台服务器）每秒可调用次数。

