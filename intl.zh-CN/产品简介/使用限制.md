# 使用限制 {#concept_gyg_xrt_tdb .concept}

物联网平台设置了以下使用限制。若这些限制不满足您的业务需求，请提工单说明业务情况和所需额度。

## 产品与设备 {#section_srj_k1v_4fb .section}

|限制|描述|限制|是否可调整|
|:-|:-|:-|:----|
|标签个数|单个产品、设备、分组最多分别可以添加的标签数|100|可以|
|产品数量|单账号最多可以创建的产品数|1000|可以|
|设备数量|单产品最多可以添加的设备数|500,000|可以|
|网关与子设备|单个网关下最多添加的子设备数|1,500|可以|
|单个网关下最多添加的子设备通道数|1,000|可以|
|网关配置下发频率|10分钟1次|不可以|
|功能定义（仅针对高级版产品）|单个产品最多可添加的功能数|100|可以|
|struct类的属性，最多可添加的参数个数|10|可以|
| 当功能的数据类型：

 -   为enum时，枚举项最多不超过25个。
-   为text时，数据长度不超过1024字节。
-   为array时，数组内的元素不超过128个

 |-|-|
|服务中可添加的入参和出参分别不超过10个。|10|可以|
|事件中可添加的出参不超过10个。|10|可以|
|数据解析|数据解析上传的脚本文件大小不能超过48 KB。|48 KB|不可以|
|远程配置|远程配置文件，仅支持JSON格式，大小不能超过64 KB。|64 KB|不可以|

## 连接通信 {#section_x5w_ycv_4fb .section}

|描述|限制|是否可调整|
|:-|:-|:----|
|单账号每秒最大MQTT连接请求数|500|可以|
|单设备每秒最大的MQTT连接请求数|1|不可以|
|单设备的最大订阅数。超过订阅数的请求将会被直接拒绝。设备端可以通过验证SUBACK消息，确认请求是否成功。|100|不可以|
|单账号每秒发布请求数|10000|可以|
|单账号每秒发给设备的请求数。|2000|可以|
|单账户每秒到达规则引擎的消息数量|1000|可以|
|单设备上报上限QoS0为30条/秒，QoS1为10条/秒。|QoS0：30条/秒QoS1：10条/秒

|不可以|
|单设备下行接收限制为50条/秒，同时受限于网络环境。如果网络tcp write buffer拥堵，将直接返回错误。比如，您通过Pub接口发指令给设备，如果设备接收不过来，将收到限流错误。**说明：** MQTT的Pub上报消息限流，协议上是没有任何答应的。您可以通过日志服务发现设备被限流的警告。

|50条/秒|可以|
|单个连接每秒的吞吐量（带宽）|1024 KB|不可以|
|单客户端的未确认入站发布请求数的限制。达到此限制后，除非服务器返回 PUBACK 消息，否则不会从此客户端接受新发布请求。|100|不可以|
|QoS1消息的最大存储时间。如果最大时间后未从客户端接收到 PUBACK 消息，则会丢弃这些发布请求。|1周|不可以|
|MQTT单个发布消息最大长度。超过此大小的发布请求将被直接拒绝。|256 KB|不可以|
|CoAP单个发布消息最大长度。超过此大小的发布请求将被直接拒绝。|1 KB|不可以|
|MQTT连接心跳时间为30至1200秒。建议取值300秒以上。从IoT发送CONNACK响应CONNECT消息时，开始心跳计时。收到PUBLISH、SUBSCRIBE、PING、或 PUBACK消息时，会重置计时器。超过指定1.5倍心跳时间间隔未收到这些消息时（指定心跳时间乘以1.5），将自动断开连接。

默认心跳时间为1200秒。心跳时间不在此区间内，服务器将会拒绝连接；设置大于0但小于30秒时，默认使用30秒。

|30-1200秒|不可以|

## Topic相关 {#section_mmp_bdv_4fb .section}

|描述|限制|是否可调整|
|:-|:-|:----|
|一个产品最多可以定义50个Topic类。|50|不可以|
|设备只能对自己的Topic进行消息发布与订阅。|-|-|
|Topic长度不能超过128字节， UTF-8 编码字符。|128字节|不可以|
|Topic中斜杠的最大数量|7|不可以|
|单账号每秒服务器订阅最大消息数|1000|可以|
|每个订阅请求的最大订阅数|8|不可以|
|订阅和取消订阅都是操作10秒后生效，一次订阅永久生效。建议您提前订阅Topic以免漏失信息。示例：设备向Topic A发送SUB请求，10秒后，订阅生效，设备开始收到实时消息，除非取消订阅，设备将一直接收Topic A的消息。

|10秒|不可以|
|广播Topic，同一个Topic最多可以被1000个设备订阅，服务端SDK每秒只可发一条广播。|1000|不可以|

## 设备影子 {#section_cnm_ddv_4fb .section}

|描述|限制|是否可调整|
|:-|:-|:----|
|设备影子JSON文档的最大深度|5|不可以|
|设备影子JSON文档的大小限制|16 KB|不可以|
|设备影子JSON文档的属性数量限制|128|不可以|
|每个设备每秒的请求数|20|不可以|

## 规则引擎 {#section_llt_ddv_4fb .section}

|描述|限制|是否可调整|
|:-|:-|:----|
|单账号最多可以设置1000条规则。|1000|不可以|
|一条规则中转发数据的操作不能超过10个。|10|不可以|
|数据转发性能依赖所转发的云产品实例，在云产品实例性能足够的情况下，规则引擎为单个阿里云账号提供1000QPS的数据转发能力。即，子账号共享主账号配额；消息并发处理，每秒最多允许1000条消息经过规则引擎流转到其他云产品。 如果请求量超出该限制或云产品写入耗时超过1s，数据转发会被限流。|1000QPS|可以|
|数据转发依赖其他云产品，使用时需确保目标云产品实例正常。目标云产品的实例宕机、欠费、参数错误（如授权变更、值非法）、配置错误等异常状况将会导致消息流转失败。|-|-|

## 云端API限制 {#section_zds_vcv_4fb .section}

|API名称|单接口|单租户|单IP|
|:----|:--|:--|:--|
|Pub|5000|1600|50|
|PubBroadcast|1000|1|50|
|BatchGetDeviceState|1000|50|50|
|BatchDeviceUpgrade|10|10|10|
|CancelDiff|10|10|10|
|CreateBatchDiff|10|10|10|
|CreateFirmware|10|10|10|
|其他接口|1000|500|50|

-   若您调用接口收到限流报错，像[公共错误](https://error-center.alibabacloud.com/status/product/Public)中29-31类型报错，可以重新尝试调用。

